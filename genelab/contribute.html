<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jDev GeneLab</title>

    <meta name="author" content="JanCraft">
    <meta name="description" content="jDev GeneLab - Human External Gene Aggregation Database and Laboratory">
    
    <link rel="shortcut icon" href="/img/favicon.png" type="image/png">
    <style>
        html, body {
            font-family: sans-serif;
            background: #333;
            color: #fff;
        }

        input {
            width: 100%;
            padding: 12px 20px;
            margin: 8px 0;
            box-sizing: border-box;
        }

        select {
            width: 100%;
            padding: 16px 20px;
            margin: 8px 0;
            border: none;
            border-radius: 4px;
            background-color: #f1f1f1;
        }

        .color-black {
            background-color: #222;
            color: #fff;
        }
        .color-deepbrown {
            background-color: #573518;
            color: #fff;
        }
        .color-red {
            background-color: #c23f02;
            color: #000;
        }
        .color-brownred {
            background-color: #701616;
            color: #fff;
        }
        .color-blond {
            background-color: #fff59b;
            color: #000;
        }
        .color-brown {
            background-color: #6e4928;
            color: #fff;
        }
        .color-blue {
            background-color: #90c6ff;
            color: #000;
        }
        .color-hazel {
            background-color: #a8aa44;
            color: #000;
        }
        .color-gray {
            background-color: #b6bccf;
            color: #000;
        }
        .color-green {
            background-color: #86d190;
            color: #000;
        }
        .color-amber {
            background-color: #ae7420;
            color: #000;
        }
        .color-deepyellow {
            background-color: #dca405;
            color: #000;
        }
        .color-yellow {
            background-color: #efcf78;
            color: #000;
        }
        .color-light {
            background-color: #fde2cc;
            color: #000;
        }
        .color-white {
            background-color: #fff;
            color: #000;
        }
    </style>
</head>
<body>
    <h2 id="c-idf">Cargando...<br><small>por favor espera...</small></h2>

    <form onsubmit="event.preventDefault();submitform()">
        <label for="eyecolor">Color de Ojos</label>
        <select id="eyecolor">
            <option value="null">Selecciona uno...</option>

            <option value="brown" class="color-brown">
                Marrón
            </option>
            <option value="blue" class="color-blue">
                Azul
            </option>
            <option value="hazel" class="color-hazel">
                Avellana
            </option>
            <option value="gray" class="color-gray">
                Gris
            </option>
            <option value="green" class="color-green">
                Verde
            </option>
            <option value="amber" class="color-amber">
                Ámbar
            </option>
        </select>
        
        <label for="haircolor">Color de Pelo</label>
        <select id="haircolor">
            <option value="null">Selecciona uno...</option>
            <option value="black" class="color-black">Negro</option>
            <option value="deepbrown" class="color-deepbrown">Marrón Profundo</option>
            <option value="brown" class="color-brown">Marrón</option>
            <option value="auburn" class="color-brownred">Marrón-Rojizo</option>
            <option value="red" class="color-red">Rojo</option>
            <option value="blond" class="color-blond">Rubio</option>
            <option value="gray" class="color-gray">Gris / Blanco</option>
        </select>
        
        <label for="skincolor">Color de Piel</label>
        <select id="skincolor">
            <option value="null">Selecciona uno...</option>
            <option value="deepbrown" class="color-deepbrown">Marrón Profundo</option>
            <option value="brown" class="color-brown">Marrón</option>
            <option value="deepyellow" class="color-deepyellow">Amarillo Profundo</option>
            <option value="yellow" class="color-yellow">Amarillo</option>
            <option value="light" class="color-light">Claro</option>
            <option value="white" class="color-white">Blacno / Pálido</option>
        </select>

        <label for="hairtype">Tipo de Pelo</label>
        <select id="hairtype">
            <option value="null">Selecciona uno...</option>
            <option value="straight">Liso</option>
            <option value="wavy">Ondulado</option>
            <option value="curly">Rizado</option>
            <option value="afro">Afro-texturizado</option>
        </select>

        <label for="faceshape">Forma de la Cara</label>
        <select id="faceshape">
            <option value="null">Selecciona uno...</option>
            <option value="oval">Ovalado</option>
            <option value="round">Redondo</option>
            <option value="square">Cuadrado</option>
            <option value="diamond">Rombo</option>
        </select>

        <label for="eyeshape">Forma de los Ojos</label>
        <select id="eyeshape">
            <option value="null">Selecciona uno...</option>
            <option value="round">Redondo</option>
            <option value="upturned">Punta hacia Arriba</option>
            <option value="downturned">Punta hacia Abajo</option>
        </select>

        <label for="freckles">Pecas</label>
        <select id="freckles">
            <option value="null">Selecciona uno...</option>
            <option value="no">No</option>
            <option value="low">Pocas</option>
            <option value="lots">Muchas</option>
        </select>

        <input type="submit" value="Contribuír!" style="cursor:pointer">
    </form>
    
    <script>
        const params = new URLSearchParams(location.search);
        const subjectid = Math.floor(Math.random() * 1000000000);

        async function init() {
            document.getElementById('c-idf').innerHTML = `
                Sujeto #${subjectid}
                <br><small>${params.get('fullname')}</small>
            `;
        }

        function nametokey(name) {
            return {
                brown: "N",
                blue: "B",
                hazel: "H",
                gray: "G",
                green: "E",
                amber: "A",
                black: "K",
                deepbrown: "W",
                auburn: "U",
                red: "R",
                blond: "L",
                deepyellow: "Y",
                yellow: "F",
                light: "T",
                white: "I",
                straight: "/",
                wavy: "~",
                curly: "&",
                afro: "#",
                oval: "0",
                round: "O",
                square: "@",
                diamond: "<",
                upturned: "^",
                downturned: "_",
                no: "X",
                low: "-",
                lots: "+"
            }[name];
        }

        function facial(list) {
            return list.map(x => nametokey(x)).join('');
        }

        async function submitform() {
            const eyecolor = document.getElementById('eyecolor').value;
            const haircolor = document.getElementById('haircolor').value;
            const skincolor = document.getElementById('skincolor').value;
            const faceshape = document.getElementById('faceshape').value;
            const eyeshape = document.getElementById('eyeshape').value;
            const freckles = document.getElementById('freckles').value;

            params.set('subjectid', subjectid);
            params.set('facial', facial([eyecolor, haircolor, skincolor, faceshape, eyeshape, freckles]));

            if (faceshape != 'null' && eyeshape != 'null' && freckles != 'null' && eyecolor != 'null' && haircolor != 'null' && skincolor != 'null') location.href = `/genelab/contributed?${params.toString()}`;
        }

        init();
    </script>
</body>
</html>